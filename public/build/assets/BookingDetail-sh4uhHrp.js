const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-BdhZGHPX.js","assets/app-XQMMahi2.js","assets/index-CCLk4ADv.js","assets/index-CbFwf3xm.css"])))=>i.map(i=>d[i]);
import{j as e,L as T,r as B,_ as J,a as H}from"./app-XQMMahi2.js";import{B as h}from"./button-B4ntXuXE.js";import{C as m,c as u,a as R,b as M}from"./card-CwtlR_4T.js";import{c as I,e as L,C as g,f as $,u as V,A as G,a as Y,b as q,P as X}from"./PageLayout-COyCGqVq.js";import{C}from"./clock-Cx5WORcs.js";import{C as Q}from"./circle-alert-BrMGsott.js";import{B as K}from"./badge-BHfy0gUt.js";import{S as F}from"./separator-BPBmNxQj.js";import{f as Z}from"./format-DKbtvHO8.js";import{C as ee}from"./credit-card-DkL91rG9.js";import{i as se}from"./id-BLZN8RMz.js";import{f as z,a as ae,b as te}from"./booking-CORMuwUe.js";import{C as re}from"./chevron-left-DHenVtRw.js";import"./index-CCLk4ADv.js";const le=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ne=I("copy",le);const ie=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],de=I("external-link",ie);const ce=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],me=I("printer",ce);function ue({booking:s}){const{toast:c}=V(),[l,d]=B.useState(!1),a=()=>{navigator.clipboard.writeText(s.payment?.payment_url??""),d(!0),c({title:"Link disalin",description:"Link pembayaran berhasil disalin ke clipboard"}),setTimeout(()=>d(!1),2e3)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{className:"border-warning/30 bg-warning/5",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex w-full items-start gap-3",children:[e.jsx(Q,{className:"mt-0.5 h-5 w-5 text-warning"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[" ",e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Menunggu Pembayaran"}),e.jsx("p",{className:"mb-3 break-words text-sm text-muted-foreground",children:"Silakan selesaikan pembayaran untuk mengonfirmasi booking Anda. Booking akan otomatis dibatalkan jika pembayaran tidak diselesaikan dalam 15 menit."}),e.jsxs("div",{className:"mb-3 flex w-full items-center gap-2",children:[e.jsx("div",{className:"max-w-full flex-1 overflow-hidden truncate rounded-lg bg-background p-3 font-mono text-sm text-muted-foreground",children:s.payment?.payment_url}),e.jsx(h,{variant:"outline",size:"icon",onClick:a,children:l?e.jsx($,{className:"h-4 w-4 text-success"}):e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(h,{variant:"outline",size:"icon",asChild:!0,children:e.jsx("a",{href:s.payment?.payment_url??"",target:"_blank",rel:"noopener noreferrer",children:e.jsx(de,{className:"h-4 w-4"})})})]})]})]})})}),e.jsx("div",{className:"space-y-2",children:e.jsx(h,{className:"w-full",size:"lg",variant:"default",asChild:!0,children:e.jsx("a",{href:s.payment?.payment_url??"",target:"_blank",rel:"noopener noreferrer",children:"Bayar Sekarang"})})})]})}function oe({booking:s}){const c=new Date(s.schedule.date),l=new Date,d=c<l,n=(new Date(`${s.schedule.date}T${s.schedule.start_time}`).getTime()-l.getTime())/(1e3*60*60),r=n<2&&n>0,i=s.status==="paid"&&!s.is_expired&&s.reschedule_status==="none"&&n>=2,t=y=>y.charAt(0).toUpperCase()+y.slice(1);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{className:"border-success/30 bg-success/5",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{className:"mt-0.5 h-5 w-5 text-success"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Pembayaran Berhasil"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Booking Anda telah dikonfirmasi. Silahkan datang sesuai jadwal yang telah dipesan."})]})]})})}),s.reschedule_status!=="none"&&e.jsx(m,{className:"border-primary/20 bg-primary/5",children:e.jsxs(u,{className:"space-y-3 p-4",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Status Reschedule"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${s.reschedule_status==="pending"?"bg-yellow-100 text-yellow-800":s.reschedule_status==="approved"?"bg-green-100 text-green-800":s.reschedule_status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-700"}`,children:t(s.reschedule_status??"")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Diminta oleh"}),e.jsx("span",{className:"font-medium",children:s.reschedule_by?t(s.reschedule_by):"-"})]}),s.reschedule_reason&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Alasan Reschedule"}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:s.reschedule_reason})]}),s.reschedule_status==="pending"&&e.jsx("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-3 text-xs text-yellow-700",children:"Permintaan reschedule sedang menunggu persetujuan konselor."}),s.reschedule_status==="approved"&&e.jsx("div",{className:"rounded-md border border-green-200 bg-green-50 p-3 text-xs text-green-700",children:"Reschedule disetujui. Silakan cek jadwal terbaru Anda."}),s.reschedule_status==="rejected"&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-xs text-red-700",children:"Reschedule ditolak. Jadwal tetap menggunakan sesi sebelumnya."})]})}),r&&s.reschedule_status==="none"&&e.jsx(m,{className:"border-orange-300 bg-orange-50",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"mt-0.5 h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Reschedule Tidak Tersedia"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reschedule hanya dapat dilakukan minimal 2 jam sebelum sesi dimulai. Silakan hubungi konselor jika ada kendala."})]})]})})}),i&&e.jsx(m,{className:"border-primary/20 bg-primary/5",children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:e.jsx(g,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Perlu Mengubah Jadwal?"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Anda dapat melakukan reschedule sesi konseling ini jika ada perubahan jadwal. Reschedule hanya dapat dilakukan minimal 2 jam sebelum sesi."}),e.jsx(h,{asChild:!0,children:e.jsxs(T,{href:route("client.pick.reschedule",s.id),children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Reschedule Booking"]})})]})]})})}),s.consultation_type==="online"&&e.jsx(e.Fragment,{children:s.meeting_link?e.jsx(m,{className:"border-primary/30 bg-primary/5",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"mt-0.5 h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Link Konsultasi Tersedia"}),e.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:"Link meeting sudah siap. Anda dapat masuk ke ruang konsultasi sekarang."}),e.jsx(h,{className:"w-full",asChild:!0,children:e.jsx("a",{href:s.meeting_link,target:"_blank",rel:"noopener noreferrer",children:"Masuk ke Sesi Konsultasi"})})]})]})})}):!d&&e.jsx(m,{className:"border-muted",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"mt-0.5 h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Menunggu Link Meeting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Konselor akan mengirimkan link sebelum sesi dimulai."})]})]})})})})]})}function xe({booking:s}){const c=s.cancelled_by==="client"?"Dibatalkan oleh Anda":s.cancelled_by==="counselor"?"Dibatalkan oleh Konselor":s.cancelled_by==="admin"?"Dibatalkan oleh Admin":"Dibatalkan oleh Sistem";return e.jsx("div",{className:"space-y-4",children:e.jsx(m,{className:"border-destructive/30 bg-destructive/5",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(L,{className:"mt-0.5 h-5 w-5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Booking Dibatalkan"}),e.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:c}),s.cancel_reason&&e.jsxs("p",{className:"rounded-lg bg-background p-2 text-sm italic text-muted-foreground",children:["Alasan: ",s.cancel_reason]}),s.payment?.status==="refund"&&e.jsx("p",{className:"mt-3 text-sm text-blue-600",children:"Dana sedang dalam proses pengembalian (refund)."}),s.payment?.status==="refunded"&&e.jsx("p",{className:"mt-3 text-sm font-medium text-green-600",children:"Dana telah berhasil dikembalikan."})]})]})})})})}function he({booking:s}){return e.jsx("div",{className:"space-y-4",children:e.jsx(m,{className:"border-orange-300 bg-orange-50",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"mt-0.5 h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Pembayaran Kadaluarsa"}),e.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Waktu pembayaran telah berakhir. Booking dibatalkan otomatis oleh sistem."}),s.cancel_reason&&e.jsxs("p",{className:"rounded-lg bg-background p-2 text-sm italic text-muted-foreground",children:["Alasan: ",s.cancel_reason]})]})]})})})})}function pe({booking:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{className:"border-primary/30 bg-primary/5",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{className:"mt-0.5 h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Sesi Konsultasi Selesai"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Terima kasih telah menggunakan layanan kami. Kami harap sesi konsultasi bermanfaat untuk Anda."})]})]})})}),s.counselor_notes&&e.jsxs(m,{className:"border-border bg-background",children:[e.jsx(R,{children:e.jsx(M,{className:"text-lg",children:"Catatan Konselor"})}),e.jsx(u,{children:e.jsx("p",{className:"whitespace-pre-line text-sm leading-relaxed text-muted-foreground",children:s.counselor_notes})})]})]})}function je({booking:s}){const c=s.previous_schedule,l=s.previous_second_schedule,d=new Date,n=(new Date(`${s.schedule.date}T${s.schedule.start_time}`).getTime()-d.getTime())/(1e3*60*60),r=n<2&&n>0,i=n>=2;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{className:"border-warning/30 bg-warning/5",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"mt-0.5 h-5 w-5 text-warning"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Jadwal Diubah"}),e.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:"Booking ini telah dijadwalkan ulang. (Perubahan jadwal masih menunggu persetujuan Konselor)"}),c&&e.jsxs("div",{className:"space-y-1 rounded-lg border bg-background p-3 text-sm",children:[e.jsx("p",{className:"mb-1 text-muted-foreground",children:"Jadwal Sebelumnya:"}),e.jsx("p",{className:"font-medium text-foreground",children:c.date}),e.jsxs("p",{className:"text-muted-foreground",children:[c.start_time.substring(0,5)," -"," ",c.end_time.substring(0,5)]}),l&&e.jsxs("p",{className:"text-muted-foreground",children:["&"," ",l.start_time.substring(0,5)," ","-"," ",l.end_time.substring(0,5)]})]})]})]})})}),r&&e.jsx(m,{className:"border-orange-300 bg-orange-50",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"mt-0.5 h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Reschedule & Pembatalan Tidak Tersedia"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reschedule dan pembatalan hanya dapat dilakukan minimal 2 jam sebelum sesi dimulai. Silakan hubungi konselor jika ada kendala."})]})]})})}),i&&s.reschedule_status==="approved"&&e.jsx(m,{className:"border-primary/20 bg-primary/5",children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:e.jsx(g,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Perlu Mengubah Jadwal Lagi?"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Anda dapat melakukan reschedule ulang jika diperlukan. Reschedule hanya dapat dilakukan minimal 2 jam sebelum sesi."}),e.jsx(h,{asChild:!0,children:e.jsxs(T,{href:route("client.pick.reschedule",s.id),children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Reschedule Ulang"]})})]})]})})}),i&&s.reschedule_status==="approved"&&e.jsx(m,{className:"border-destructive/20 bg-destructive/5",children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-destructive/10 p-3",children:e.jsx(L,{className:"h-6 w-6 text-destructive"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Perlu Membatalkan Booking?"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Pembatalan hanya dapat dilakukan minimal 2 jam sebelum sesi dimulai. Dana akan dikembalikan sesuai kebijakan refund."}),e.jsx(h,{variant:"destructive",asChild:!0,children:e.jsxs(T,{href:route("client.booking.cancel",s.id),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Batalkan Booking"]})})]})]})})}),s.meeting_link&&e.jsx(h,{className:"w-full",size:"lg",asChild:!0,children:e.jsx("a",{href:s.meeting_link,target:"_blank",rel:"noopener noreferrer",children:"Masuk ke Sesi Konsultasi"})})]})}function fe({booking:s}){const l=s.counselor.user.profile_pic?`http://127.0.0.1:8000/storage/${s.counselor.user.profile_pic}`:"/default-avatar.png",d=new Date(s.schedule.date),a=s.schedule.start_time.substring(0,5),n=s.second_schedule?.end_time?.substring(0,5)||s.schedule.end_time.substring(0,5),r=`${a} - ${n}`,i=s.payment?.amount??0,t=f=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(f),y=f=>f.replace(/_/g," ").split(" ").map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" ");return e.jsxs(m,{className:"mb-6",children:[e.jsx(R,{className:"pb-4",children:e.jsxs(M,{className:"text-lg",children:["Invoice #",s.payment?.order_id]})}),e.jsxs(u,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsxs(G,{className:"mx-auto h-16 w-16 rounded-lg sm:mx-0",children:[e.jsx(Y,{src:l,alt:s.counselor.user.name}),e.jsx(q,{className:"rounded-lg",children:s.counselor.user.name.split(" ").map(f=>f[0]).join("")})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:s.counselor.user.name}),e.jsx("div",{className:"mt-1 flex flex-wrap justify-center gap-1 sm:justify-start",children:s.counselor.specialization?.split(",").map((f,v)=>e.jsx(K,{variant:"secondary",className:"text-xs",children:f.trim()},v))})]})]}),e.jsx(F,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{icon:e.jsx(g,{className:"h-4 w-4"}),label:"Tanggal",value:Z(d,"EEEE, d MMMM yyyy",{locale:se})}),e.jsx(S,{icon:e.jsx(C,{className:"h-4 w-4"}),label:"Waktu",value:r}),e.jsx(S,{icon:e.jsx(C,{className:"h-4 w-4"}),label:"Durasi",value:`${s.duration_hours} jam`}),e.jsx(S,{icon:e.jsx(ee,{className:"h-4 w-4"}),label:"Metode Pembayaran",value:y(s.payment?.payment_type??"Belum")}),e.jsx(S,{icon:e.jsx(g,{className:"h-4 w-4"}),label:"Jenis Konsultasi",value:s.consultation_type})]}),e.jsx(F,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Biaya Sesi"}),e.jsx("span",{children:t(s.price)})]}),e.jsx(F,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Total"}),e.jsx("span",{className:"text-xl font-semibold",children:t(i)})]})]})]})]})}function S({icon:s,label:c,value:l}){return e.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s,e.jsx("span",{children:c})]}),e.jsx("span",{className:"break-words font-medium text-foreground",children:l})]})}const Ne=s=>{const[c,l]=B.useState(null);return B.useEffect(()=>{if(!s)return;const d=setInterval(()=>{const a=new Date().getTime(),n=s.getTime()-a;if(n<=0){l("Kadaluarsa"),clearInterval(d);return}const r=Math.floor(n/(1e3*60*60)),i=Math.floor(n%(1e3*60*60)/(1e3*60)),t=Math.floor(n%(1e3*60)/1e3);l(`${r}j ${i}m ${t}d`)},1e3);return()=>clearInterval(d)},[s]),c},x={primary:[128,0,32],secondary:[34,197,94],gray:[107,114,128],lightGray:[243,244,246],warning:[251,191,36],danger:[239,68,68]},k=(s,c,l,d,a)=>(s.setFillColor(...x.primary),s.rect(d,l,a,8,"F"),s.setFontSize(11),s.setFont("helvetica","bold"),s.setTextColor(255,255,255),s.text(c,d+4,l+5.5),s.setTextColor(0,0,0),l+12),o=(s,c,l,d,a,n,r=!1)=>(r&&(s.setFillColor(...x.lightGray),s.rect(a,d-4,n,7,"F")),s.setFontSize(10),s.setFont("helvetica","bold"),s.setTextColor(...x.gray),s.text(c,a+4,d),s.setFont("helvetica","normal"),s.setTextColor(0,0,0),s.text(l,a+55,d),d+7),A=(s,c,l,d,a,n,r=!1)=>{r&&(s.setFillColor(...x.lightGray),s.rect(a,d-4,n,7,"F")),s.setFontSize(10),s.setFont("helvetica","bold"),s.setTextColor(...x.gray),s.text(c,a+4,d),s.setFont("helvetica","normal"),s.setTextColor(0,0,0);const i=n-55,t=s.getTextWidth(l)>i?l.substring(0,20)+"...":l;return s.text(t,a+45,d),d+7},ge=async(s,c,l)=>{const{jsPDF:d}=await J(async()=>{const{jsPDF:b}=await import("./jspdf.es.min-BdhZGHPX.js").then(_=>_.j);return{jsPDF:b}},__vite__mapDeps([0,1,2,3])),a=new d,n=a.internal.pageSize.getWidth(),r=15,i=n-r*2;let t=15;a.setFillColor(...x.primary),a.rect(0,0,n,35,"F"),a.setFontSize(18),a.setFont("helvetica","bold"),a.setTextColor(255,255,255),a.text("BUKTI BOOKING KONSULTASI",n/2,15,{align:"center"}),a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`No. Booking: #${s.id}`,n/2,24,{align:"center"});const y=l(s.status),f=a.getTextWidth(y)+12,v=(n-f)/2;s.status==="paid"||s.status==="completed"?a.setFillColor(...x.secondary):s.status==="cancelled"?a.setFillColor(...x.danger):a.setFillColor(...x.warning),a.roundedRect(v,27,f,6,2,2,"F"),a.setFontSize(8),a.setTextColor(255,255,255),a.text(y.toUpperCase(),n/2,31,{align:"center"}),a.setTextColor(0,0,0),t=45;const p=i/2-3;let N=k(a,"DATA KLIEN",t,r,p);a.setDrawColor(220,220,220),a.rect(r,N-4,p,28,"S"),N=o(a,"Nama",s.client.name,N,r,p,!0),N=o(a,"Email",s.client.email,N,r,p),N=o(a,"Telepon",s.client.phone||"-",N,r,p,!0);const w=r+p+6;let j=t;a.setFillColor(...x.primary),a.rect(w,j,p,8,"F"),a.setFontSize(11),a.setFont("helvetica","bold"),a.setTextColor(255,255,255),a.text("DATA COUNSELOR",w+4,j+5.5),a.setTextColor(0,0,0),j+=12,a.setDrawColor(220,220,220),a.rect(w,j-4,p,28,"S"),j=A(a,"Nama",s.counselor.user.name,j,w,p,!0),j=A(a,"Spesialisasi",s.counselor.specialization,j,w,p),j=A(a,"Pendidikan",s.counselor.education,j,w,p,!0),t=Math.max(N,j)+10,t=k(a,"DETAIL JADWAL KONSULTASI",t,r,i),a.setDrawColor(220,220,220),a.rect(r,t-4,i,35,"S");const P=new Date(s.schedule.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),E=s.schedule.start_time.substring(0,5),U=s.schedule.end_time.substring(0,5),O=s.consultation_type==="online"?"Online":"Offline";if(t=o(a,"Tanggal",P,t,r,i,!0),t=o(a,"Waktu",`${E} - ${U} WIB`,t,r,i),t=o(a,"Durasi",`${s.duration_hours} Jam`,t,r,i,!0),t=o(a,"Tipe",O,t,r,i),t=o(a,"Biaya",c(s.price),t,r,i,!0),t+=10,s.payment){t=k(a,"INFORMASI PEMBAYARAN",t,r,i);const b=4+(s.payment.paid_at?1:0);a.setDrawColor(220,220,220),a.rect(r,t-4,i,b*7,"S");const _=s.payment.status==="paid"?"✓ LUNAS":s.payment.status==="pending"?"⏳ Menunggu Pembayaran":l(s.payment.status);if(t=o(a,"Order ID",s.payment.order_id,t,r,i,!0),t=o(a,"Status",_,t,r,i),s.payment.payment_type&&(t=o(a,"Metode",s.payment.payment_type.toUpperCase(),t,r,i,!0)),t=o(a,"Total Bayar",c(s.payment.amount),t,r,i),s.payment.paid_at){const W=new Date(s.payment.paid_at).toLocaleString("id-ID");t=o(a,"Dibayar pada",W,t,r,i,!0)}t+=10}if(s.notes){t=k(a,"CATATAN",t,r,i),a.setDrawColor(220,220,220),a.setFontSize(10),a.setFont("helvetica","normal");const b=a.splitTextToSize(s.notes,i-8),_=b.length*5+6;a.rect(r,t-4,i,_,"S"),a.text(b,r+4,t),t+=_+6}const D=a.internal.pageSize.getHeight()-20;a.setDrawColor(...x.primary),a.setLineWidth(.5),a.line(r,D-5,n-r,D-5),a.setFontSize(8),a.setTextColor(...x.gray),a.setFont("helvetica","italic"),a.text(`Dokumen ini dicetak secara otomatis pada ${new Date().toLocaleString("id-ID")}`,n/2,D,{align:"center"}),a.setFont("helvetica","normal"),a.text("Terima kasih telah menggunakan layanan kami",n/2,D+5,{align:"center"}),a.save(`bukti-booking-${s.id}.pdf`)};function Re({booking:s}){const c=s.payment?.expiry_time?new Date(s.payment.expiry_time):null,l=Ne(c),d=()=>{if(s.is_expired)return e.jsx(he,{booking:s});if(s.status==="cancelled")return e.jsx(xe,{booking:s});switch(s.status){case"pending_payment":return e.jsx(ue,{booking:s});case"paid":return e.jsx(oe,{booking:s});case"completed":return e.jsx(pe,{booking:s});case"rescheduled":return e.jsx(je,{booking:s});default:return null}},a=()=>{confirm("Anda yakin ingin membatalkan booking ini?")&&H.post(route("client.cancel.booking",s.id),{reason:"Dibatalkan oleh client"},{preserveScroll:!0})},n=async()=>{await ge(s,te,z)};return e.jsx(X,{children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4",children:[e.jsx(h,{variant:"ghost",asChild:!0,className:"mb-4",children:e.jsxs(T,{href:route("client.booking.history"),children:[e.jsx(re,{className:"mr-1 h-4 w-4"}),"Kembali ke Daftar Booking"]})}),e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"font-display text-2xl font-semibold text-foreground",children:"Detail Booking"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(K,{variant:ae(s.status),className:"text-sm",children:z(s.status)}),l&&!s.is_expired&&s.status=="pending_payment"&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-1 text-xs font-medium text-red-600",children:l==="Kadaluarsa"?"Kadaluarsa":`Sisa waktu: ${l}`}),["paid","rescheduled"].includes(s.status)&&!s.is_expired&&e.jsx(h,{variant:"destructive",size:"sm",onClick:()=>a(),children:"Cancel Booking"}),["paid","completed"].includes(s.status)&&e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>n(),className:"gap-1",children:[e.jsx(me,{className:"h-4 w-4"}),"Print Bukti Booking"]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx("div",{children:e.jsx(fe,{booking:s})}),e.jsxs("div",{className:"h-fit",children:[d(),s.notes&&e.jsxs(m,{className:"my-3",children:[e.jsx(R,{children:e.jsx(M,{className:"text-lg",children:"Catatan Klien"})}),e.jsx(u,{children:e.jsx("p",{className:"text-muted-foreground",children:s.notes})})]}),e.jsx(h,{variant:"outline",className:"my-2 w-full border-primary bg-amber-50 transition hover:border-white hover:bg-primary hover:text-white",asChild:!0,children:e.jsx(T,{href:route("client.booking.history"),children:"Lihat Semua Booking"})})]})]})})]})})}export{Re as default};
