import{r as o,j as e,a as F}from"./app-Cpmij5Ta.js";import{g as h,k as E,i as L,j as R,u as T,P as $,C as j,c as g,A as I,d as B,e as z,f as K,a as N,b as y,B as U}from"./card-CvzgLY8G.js";import{I as p}from"./input-DWGy1HBr.js";import{f as H}from"./format-DKbtvHO8.js";import"./index-Ci9urwJV.js";const O=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],V=h("camera",O);const q=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],G=h("lock",q);const W=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],J=h("mail",W);const Q=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],X=h("phone",Q);const Y=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Z=h("user",Y);var ee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ae=ee.reduce((a,t)=>{const i=E(`Primitive.${t}`),c=o.forwardRef((x,v)=>{const{asChild:w,...u}=x,f=w?i:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...u,ref:v})});return c.displayName=`Primitive.${t}`,{...a,[t]:c}},{}),se="Label",k=o.forwardRef((a,t)=>e.jsx(ae.label,{...a,ref:t,onMouseDown:i=>{i.target.closest("button, input, select, textarea")||(a.onMouseDown?.(i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));k.displayName=se;var P=k;const re=R("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef(({className:a,...t},i)=>e.jsx(P,{ref:i,className:L(re(),a),...t}));d.displayName=P.displayName;function ce({user:a}){const{toast:t}=T(),i=o.useRef(null),[c,x]=o.useState(!1),[v,w]=o.useState(a.profile_pic?`/storage/${a.profile_pic}`:null),[u,f]=o.useState(null),[r,b]=o.useState({name:a.name,email:a.email,phone:a.phone||"",password:"",confirmPassword:""}),m=n=>{b(s=>({...s,[n.target.name]:n.target.value}))},C=()=>{i.current?.click()},M=n=>{const s=n.target.files?.[0];if(s){if(!s.type.startsWith("image/")){t({title:"Error",description:"File harus berupa gambar.",variant:"destructive"});return}if(s.size>2*1024*1024){t({title:"Error",description:"Ukuran file maksimal 2MB.",variant:"destructive"});return}f(s);const l=new FileReader;l.onloadend=()=>{w(l.result)},l.readAsDataURL(s)}},S=n=>{if(n.preventDefault(),r.password&&r.password!==r.confirmPassword){t({title:"Error",description:"Password tidak cocok.",variant:"destructive"});return}x(!0);const s=new FormData;s.append("name",r.name||a.name),s.append("email",r.email||a.email),s.append("phone",r.phone||a.phone||""),u&&s.append("profile_pic",u),r.password&&r.password.trim()!==""&&(s.append("password",r.password),s.append("password_confirmation",r.confirmPassword)),s.append("_method","POST"),F.post(route("client.profile.update"),s,{forceFormData:!0,onSuccess:()=>{t({title:"Berhasil",description:"Profil Anda berhasil diperbarui."}),b(l=>({...l,password:"",confirmPassword:""})),f(null)},onError:l=>{const D=Object.values(l).flat().join(", ")||"Gagal memperbarui profil. Silakan periksa input Anda.";t({title:"Error",description:D,variant:"destructive"})},onFinish:()=>{x(!1)}})},_=n=>n.split(" ").map(s=>s[0]).join("").toUpperCase(),A=()=>{const n=new Date(a.created_at),l=Math.floor((new Date().getTime()-n.getTime())/(1e3*60*60*24*30));return l>0?`${l} bulan`:"Kurang dari sebulan"};return e.jsx($,{title:"Profil Saya",description:"Kelola pengaturan akun dan preferensi Anda",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{children:e.jsxs(g,{className:"p-6 text-center",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsxs(I,{className:"h-24 w-24 mx-auto border-4 border-primary/10",children:[e.jsx(B,{src:v||void 0,alt:a.name}),e.jsx(z,{className:"text-2xl",children:_(a.name)})]}),e.jsx("button",{type:"button",onClick:C,className:"absolute bottom-0 right-0 h-8 w-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center shadow-md hover:bg-primary/90 transition-colors",children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:M,className:"hidden"})]}),e.jsx("h2",{className:"font-display text-xl font-semibold text-foreground mt-4",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.email}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-2 text-sm text-muted-foreground",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsxs("span",{children:["Sejak ",H(new Date(a.created_at),"MMMM yyyy")]})]})]})}),e.jsxs(j,{children:[e.jsx(N,{className:"pb-3",children:e.jsx(y,{className:"text-base",children:"Statistik Cepat"})}),e.jsxs(g,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status Email"}),e.jsx("span",{className:"font-medium text-foreground",children:a.email_verified_at?"Terverifikasi":"Belum Terverifikasi"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Aktif Sejak"}),e.jsx("span",{className:"font-medium text-foreground",children:A()})]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(y,{className:"text-lg flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),"Informasi Pribadi"]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Nama Lengkap"}),e.jsx(p,{id:"name",name:"name",value:r.name,onChange:m,placeholder:"Masukkan nama Anda"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"phone",children:"Nomor Telepon"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"phone",name:"phone",value:r.phone,onChange:m,placeholder:"Masukkan nomor telepon",className:"pl-10"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",children:"Alamat Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"email",name:"email",type:"email",value:r.email,onChange:m,placeholder:"Masukkan alamat email",className:"pl-10"})]})]})]})]}),e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(y,{className:"text-lg flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5 text-primary"}),"Ubah Password"]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"password",children:"Password Baru"}),e.jsx(p,{id:"password",name:"password",type:"password",value:r.password,onChange:m,placeholder:"Masukkan password baru"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"confirmPassword",children:"Konfirmasi Password"}),e.jsx(p,{id:"confirmPassword",name:"confirmPassword",type:"password",value:r.confirmPassword,onChange:m,placeholder:"Konfirmasi password baru"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Kosongkan jika tidak ingin mengubah password"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(U,{size:"lg",onClick:S,disabled:c,children:c?"Menyimpan...":"Simpan Perubahan"})})]})]})})})}export{ce as default};
