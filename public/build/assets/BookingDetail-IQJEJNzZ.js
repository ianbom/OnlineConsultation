const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-CL5mKby6.js","assets/app-CMEvEkaP.js","assets/index-DW7OYsA0.js","assets/index-B-UwhQdS.css"])))=>i.map(i=>d[i]);
import{j as e,L as T,r as $,_ as q,a as V}from"./app-CMEvEkaP.js";import{B as p}from"./button-DFWESZbF.js";import{C as u,c as o,a as L,b as R}from"./card-GVVAMpoF.js";import{c as B,e as M,C as y,f as K,u as G,A as Y,a as X,b as Q,P as Z}from"./PageLayout-CGELvftg.js";import{C as b}from"./clock-DLOao912.js";import{C as ee}from"./circle-alert-CaXdiH1k.js";import{B as P}from"./badge-YF5tDr-v.js";import{S as A}from"./separator-C_Y8IgAP.js";import{f as W}from"./format-DKbtvHO8.js";import{C as se}from"./credit-card-B6Yxv283.js";import{i as z}from"./id-BLZN8RMz.js";import{f as I,a as ae,b as te}from"./booking-BWQIzxkQ.js";import{C as re}from"./chevron-left-BErdDeQE.js";import"./index-DW7OYsA0.js";const ne=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],le=B("copy",ne);const ie=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ce=B("external-link",ie);const de=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],me=B("message-circle",de);const ue=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],oe=B("printer",ue);function xe({booking:s}){const{toast:c}=G(),[n,d]=$.useState(!1),a=()=>{navigator.clipboard.writeText(s.payment?.payment_url??""),d(!0),c({title:"Link disalin",description:"Link pembayaran berhasil disalin ke clipboard"}),setTimeout(()=>d(!1),2e3)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{className:"border-warning/30 bg-warning/5",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex w-full items-start gap-3",children:[e.jsx(ee,{className:"mt-0.5 h-5 w-5 text-warning"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[" ",e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Menunggu Pembayaran"}),e.jsx("p",{className:"mb-3 break-words text-sm text-muted-foreground",children:"Silakan selesaikan pembayaran untuk mengonfirmasi booking Anda. Booking akan otomatis dibatalkan jika pembayaran tidak diselesaikan dalam 15 menit."}),e.jsxs("div",{className:"mb-3 flex w-full items-center gap-2",children:[e.jsx("div",{className:"max-w-full flex-1 overflow-hidden truncate rounded-lg bg-background p-3 font-mono text-sm text-muted-foreground",children:s.payment?.payment_url}),e.jsx(p,{variant:"outline",size:"icon",onClick:a,children:n?e.jsx(K,{className:"h-4 w-4 text-success"}):e.jsx(le,{className:"h-4 w-4"})}),e.jsx(p,{variant:"outline",size:"icon",asChild:!0,children:e.jsx("a",{href:s.payment?.payment_url??"",target:"_blank",rel:"noopener noreferrer",children:e.jsx(ce,{className:"h-4 w-4"})})})]})]})]})})}),e.jsx("div",{className:"space-y-2",children:e.jsx(p,{className:"w-full",size:"lg",variant:"default",asChild:!0,children:e.jsx("a",{href:s.payment?.payment_url??"",target:"_blank",rel:"noopener noreferrer",children:"Bayar Sekarang"})})})]})}function he({booking:s}){const c=new Date(s.schedule.date),n=new Date,d=c<n,i=(new Date(`${s.schedule.date}T${s.schedule.start_time}`).getTime()-n.getTime())/(1e3*60*60),r=i<2&&i>0,l=s.status==="paid"&&!s.is_expired&&s.reschedule_status==="none"&&i>=2,t=m=>m.charAt(0).toUpperCase()+m.slice(1);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{className:"border-success/30 bg-success/5",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(K,{className:"mt-0.5 h-5 w-5 text-success"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Pembayaran Berhasil"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Booking Anda telah dikonfirmasi. Silahkan datang sesuai jadwal yang telah dipesan."})]})]})})}),s.reschedule_status!=="none"&&e.jsx(u,{className:"border-primary/20 bg-primary/5",children:e.jsxs(o,{className:"space-y-3 p-4",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Status Reschedule"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${s.reschedule_status==="pending"?"bg-yellow-100 text-yellow-800":s.reschedule_status==="approved"?"bg-green-100 text-green-800":s.reschedule_status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-700"}`,children:t(s.reschedule_status??"")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Diminta oleh"}),e.jsx("span",{className:"font-medium",children:s.reschedule_by?t(s.reschedule_by):"-"})]}),s.reschedule_reason&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Alasan Reschedule"}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:s.reschedule_reason})]}),s.reschedule_status==="pending"&&e.jsx("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-3 text-xs text-yellow-700",children:"Permintaan reschedule sedang menunggu persetujuan konselor."}),s.reschedule_status==="approved"&&e.jsx("div",{className:"rounded-md border border-green-200 bg-green-50 p-3 text-xs text-green-700",children:"Reschedule disetujui. Silakan cek jadwal terbaru Anda."}),s.reschedule_status==="rejected"&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-xs text-red-700",children:"Reschedule ditolak. Jadwal tetap menggunakan sesi sebelumnya."})]})}),r&&s.reschedule_status==="none"&&e.jsx(u,{className:"border-orange-300 bg-orange-50",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(b,{className:"mt-0.5 h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Reschedule Tidak Tersedia"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reschedule hanya dapat dilakukan minimal 2 jam sebelum sesi dimulai. Silakan hubungi konselor jika ada kendala."})]})]})})}),l&&e.jsx(u,{className:"border-primary/20 bg-primary/5",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:e.jsx(y,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Perlu Mengubah Jadwal?"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Anda dapat melakukan reschedule sesi konseling ini jika ada perubahan jadwal. Reschedule hanya dapat dilakukan minimal 2 jam sebelum sesi."}),e.jsx(p,{asChild:!0,children:e.jsxs(T,{href:route("client.pick.reschedule",s.id),children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Reschedule Booking"]})})]})]})})}),s.consultation_type==="online"&&e.jsx(e.Fragment,{children:s.meeting_link?e.jsx(u,{className:"border-primary/30 bg-primary/5",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y,{className:"mt-0.5 h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Link Konsultasi Tersedia"}),e.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:"Link meeting sudah siap. Anda dapat masuk ke ruang konsultasi sekarang."}),e.jsx(p,{className:"w-full",asChild:!0,children:e.jsx("a",{href:s.meeting_link,target:"_blank",rel:"noopener noreferrer",children:"Masuk ke Sesi Konsultasi"})})]})]})})}):!d&&e.jsx(u,{className:"border-muted",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(b,{className:"mt-0.5 h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Menunggu Link Meeting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Konselor akan mengirimkan link sebelum sesi dimulai."})]})]})})})})]})}function pe({booking:s}){const c=s.cancelled_by==="client"?"Dibatalkan oleh Anda":s.cancelled_by==="counselor"?"Dibatalkan oleh Konselor":s.cancelled_by==="admin"?"Dibatalkan oleh Admin":"Dibatalkan oleh Sistem";return e.jsx("div",{className:"space-y-4",children:e.jsx(u,{className:"border-destructive/30 bg-destructive/5",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(M,{className:"mt-0.5 h-5 w-5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Booking Dibatalkan"}),e.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:c}),s.cancel_reason&&e.jsxs("p",{className:"rounded-lg bg-background p-2 text-sm italic text-muted-foreground",children:["Alasan: ",s.cancel_reason]}),s.payment?.status==="refund"&&e.jsx("p",{className:"mt-3 text-sm text-blue-600",children:"Dana sedang dalam proses pengembalian (refund)."}),s.payment?.status==="refunded"&&e.jsx("p",{className:"mt-3 text-sm font-medium text-green-600",children:"Dana telah berhasil dikembalikan."})]})]})})})})}function je({booking:s}){return e.jsx("div",{className:"space-y-4",children:e.jsx(u,{className:"border-orange-300 bg-orange-50",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(b,{className:"mt-0.5 h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Pembayaran Kadaluarsa"}),e.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Waktu pembayaran telah berakhir. Booking dibatalkan otomatis oleh sistem."}),s.cancel_reason&&e.jsxs("p",{className:"rounded-lg bg-background p-2 text-sm italic text-muted-foreground",children:["Alasan: ",s.cancel_reason]})]})]})})})})}function fe({booking:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{className:"border-primary/30 bg-primary/5",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(K,{className:"mt-0.5 h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Sesi Konsultasi Selesai"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Terima kasih telah menggunakan layanan kami. Kami harap sesi konsultasi bermanfaat untuk Anda."})]})]})})}),s.counselor_notes&&e.jsxs(u,{className:"border-border bg-background",children:[e.jsx(L,{children:e.jsx(R,{className:"text-lg",children:"Catatan Konselor"})}),e.jsx(o,{children:e.jsx("p",{className:"whitespace-pre-line text-sm leading-relaxed text-muted-foreground",children:s.counselor_notes})})]})]})}function ge({booking:s}){const c=s.previous_schedule,n=s.previous_second_schedule,d=new Date,i=(new Date(`${s.schedule.date}T${s.schedule.start_time}`).getTime()-d.getTime())/(1e3*60*60),r=i<2&&i>0,l=i>=2;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{className:"border-warning/30 bg-warning/5",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y,{className:"mt-0.5 h-5 w-5 text-warning"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Jadwal Diubah"}),e.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:"Booking ini telah dijadwalkan ulang. (Perubahan jadwal masih menunggu persetujuan Konselor)"}),c&&e.jsxs("div",{className:"space-y-1 rounded-lg border bg-background p-3 text-sm",children:[e.jsx("p",{className:"mb-1 text-muted-foreground",children:"Jadwal Sebelumnya:"}),e.jsx("p",{className:"font-medium text-foreground",children:c.date}),e.jsxs("p",{className:"text-muted-foreground",children:[c.start_time.substring(0,5)," -"," ",c.end_time.substring(0,5)]}),n&&e.jsxs("p",{className:"text-muted-foreground",children:["&"," ",n.start_time.substring(0,5)," ","-"," ",n.end_time.substring(0,5)]})]})]})]})})}),r&&e.jsx(u,{className:"border-orange-300 bg-orange-50",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(b,{className:"mt-0.5 h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Reschedule & Pembatalan Tidak Tersedia"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reschedule dan pembatalan hanya dapat dilakukan minimal 2 jam sebelum sesi dimulai. Silakan hubungi konselor jika ada kendala."})]})]})})}),l&&s.reschedule_status==="approved"&&e.jsx(u,{className:"border-primary/20 bg-primary/5",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:e.jsx(y,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Perlu Mengubah Jadwal Lagi?"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Anda dapat melakukan reschedule ulang jika diperlukan. Reschedule hanya dapat dilakukan minimal 2 jam sebelum sesi."}),e.jsx(p,{asChild:!0,children:e.jsxs(T,{href:route("client.pick.reschedule",s.id),children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Reschedule Ulang"]})})]})]})})}),l&&s.reschedule_status==="approved"&&e.jsx(u,{className:"border-destructive/20 bg-destructive/5",children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-destructive/10 p-3",children:e.jsx(M,{className:"h-6 w-6 text-destructive"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Perlu Membatalkan Booking?"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Pembatalan hanya dapat dilakukan minimal 2 jam sebelum sesi dimulai. Dana akan dikembalikan sesuai kebijakan refund."}),e.jsx(p,{variant:"destructive",asChild:!0,children:e.jsxs(T,{href:route("client.booking.cancel",s.id),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Batalkan Booking"]})})]})]})})}),s.meeting_link&&e.jsx(p,{className:"w-full",size:"lg",asChild:!0,children:e.jsx("a",{href:s.meeting_link,target:"_blank",rel:"noopener noreferrer",children:"Masuk ke Sesi Konsultasi"})})]})}function Ne({booking:s}){const c=s.counselor.user.profile_pic?`/storage/${s.counselor.user.profile_pic}`:"/default-avatar.png",n=new Date(s.schedule.date),d=s.schedule.start_time.substring(0,5),a=s.second_schedule?.end_time?.substring(0,5)||s.schedule.end_time.substring(0,5),i=`${d} - ${a}`,r=s.payment?.amount??0,l=m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(m),t=m=>m.replace(/_/g," ").split(" ").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" ");return e.jsxs(u,{className:"mb-6",children:[e.jsx(L,{className:"pb-4",children:e.jsxs(R,{className:"text-lg",children:["Invoice #",s.payment?.order_id]})}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsxs(Y,{className:"mx-auto h-16 w-16 rounded-lg sm:mx-0",children:[e.jsx(X,{src:c,alt:s.counselor.user.name}),e.jsx(Q,{className:"rounded-lg",children:s.counselor.user.name.split(" ").map(m=>m[0]).join("")})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:s.counselor.user.name}),e.jsx("div",{className:"mt-1 flex flex-wrap justify-center gap-1 sm:justify-start",children:s.counselor.specialization?.split(",").map((m,j)=>e.jsx(P,{variant:"secondary",className:"text-xs",children:m.trim()},j))})]})]}),e.jsx(A,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{icon:e.jsx(y,{className:"h-4 w-4"}),label:"Tanggal",value:W(n,"EEEE, d MMMM yyyy",{locale:z})}),e.jsx(S,{icon:e.jsx(b,{className:"h-4 w-4"}),label:"Waktu",value:i}),e.jsx(S,{icon:e.jsx(b,{className:"h-4 w-4"}),label:"Durasi",value:`${s.duration_hours} jam`}),e.jsx(S,{icon:e.jsx(se,{className:"h-4 w-4"}),label:"Metode Pembayaran",value:t(s.payment?.payment_type??"Belum")}),e.jsx(S,{icon:e.jsx(y,{className:"h-4 w-4"}),label:"Jenis Konsultasi",value:s.consultation_type})]}),e.jsx(A,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Biaya Sesi"}),e.jsx("span",{children:l(s.price)})]}),e.jsx(A,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Total"}),e.jsx("span",{className:"text-xl font-semibold",children:l(r)})]})]})]})]})}function S({icon:s,label:c,value:n}){return e.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s,e.jsx("span",{children:c})]}),e.jsx("span",{className:"break-words font-medium text-foreground",children:n})]})}const ye=s=>{const[c,n]=$.useState(null);return $.useEffect(()=>{if(!s)return;const d=setInterval(()=>{const a=new Date().getTime(),i=s.getTime()-a;if(i<=0){n("Kadaluarsa"),clearInterval(d);return}const r=Math.floor(i/(1e3*60*60)),l=Math.floor(i%(1e3*60*60)/(1e3*60)),t=Math.floor(i%(1e3*60)/1e3);n(`${r}j ${l}m ${t}d`)},1e3);return()=>clearInterval(d)},[s]),c},g={primary:[128,0,32],secondary:[34,197,94],gray:[107,114,128],lightGray:[243,244,246],warning:[251,191,36],danger:[239,68,68]},D=(s,c,n,d,a)=>(s.setFillColor(...g.primary),s.rect(d,n,a,8,"F"),s.setFontSize(11),s.setFont("helvetica","bold"),s.setTextColor(255,255,255),s.text(c,d+4,n+5.5),s.setTextColor(0,0,0),n+12),h=(s,c,n,d,a,i,r=!1)=>(r&&(s.setFillColor(...g.lightGray),s.rect(a,d-4,i,7,"F")),s.setFontSize(10),s.setFont("helvetica","bold"),s.setTextColor(...g.gray),s.text(c,a+4,d),s.setFont("helvetica","normal"),s.setTextColor(0,0,0),s.text(n,a+55,d),d+7),F=(s,c,n,d,a,i,r=!1)=>{r&&(s.setFillColor(...g.lightGray),s.rect(a,d-4,i,7,"F")),s.setFontSize(10),s.setFont("helvetica","bold"),s.setTextColor(...g.gray),s.text(c,a+4,d),s.setFont("helvetica","normal"),s.setTextColor(0,0,0);const l=i-55,t=s.getTextWidth(n)>l?n.substring(0,20)+"...":n;return s.text(t,a+45,d),d+7},ve=async(s,c,n)=>{const{jsPDF:d}=await q(async()=>{const{jsPDF:w}=await import("./jspdf.es.min-CL5mKby6.js").then(_=>_.j);return{jsPDF:w}},__vite__mapDeps([0,1,2,3])),a=new d,i=a.internal.pageSize.getWidth(),r=15,l=i-r*2;let t=15;a.setFillColor(...g.primary),a.rect(0,0,i,35,"F"),a.setFontSize(18),a.setFont("helvetica","bold"),a.setTextColor(255,255,255),a.text("BUKTI BOOKING KONSULTASI",i/2,15,{align:"center"}),a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`No. Booking: #${s.id}`,i/2,24,{align:"center"});const m=n(s.status),j=a.getTextWidth(m)+12,C=(i-j)/2;s.status==="paid"||s.status==="completed"?a.setFillColor(...g.secondary):s.status==="cancelled"?a.setFillColor(...g.danger):a.setFillColor(...g.warning),a.roundedRect(C,27,j,6,2,2,"F"),a.setFontSize(8),a.setTextColor(255,255,255),a.text(m.toUpperCase(),i/2,31,{align:"center"}),a.setTextColor(0,0,0),t=45;const x=l/2-3;let f=D(a,"DATA KLIEN",t,r,x);a.setDrawColor(220,220,220),a.rect(r,f-4,x,28,"S"),f=h(a,"Nama",s.client.name,f,r,x,!0),f=h(a,"Email",s.client.email,f,r,x),f=h(a,"Telepon",s.client.phone||"-",f,r,x,!0);const v=r+x+6;let N=t;a.setFillColor(...g.primary),a.rect(v,N,x,8,"F"),a.setFontSize(11),a.setFont("helvetica","bold"),a.setTextColor(255,255,255),a.text("DATA COUNSELOR",v+4,N+5.5),a.setTextColor(0,0,0),N+=12,a.setDrawColor(220,220,220),a.rect(v,N-4,x,28,"S"),N=F(a,"Nama",s.counselor.user.name,N,v,x,!0),N=F(a,"Spesialisasi",s.counselor.specialization,N,v,x),N=F(a,"Pendidikan",s.counselor.education,N,v,x,!0),t=Math.max(f,N)+10,t=D(a,"DETAIL JADWAL KONSULTASI",t,r,l),a.setDrawColor(220,220,220),a.rect(r,t-4,l,35,"S");const E=new Date(s.schedule.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),U=s.schedule.start_time.substring(0,5),O=s.schedule.end_time.substring(0,5),H=s.consultation_type==="online"?"Online":"Offline";if(t=h(a,"Tanggal",E,t,r,l,!0),t=h(a,"Waktu",`${U} - ${O} WIB`,t,r,l),t=h(a,"Durasi",`${s.duration_hours} Jam`,t,r,l,!0),t=h(a,"Tipe",H,t,r,l),t=h(a,"Biaya",c(s.price),t,r,l,!0),t+=10,s.payment){t=D(a,"INFORMASI PEMBAYARAN",t,r,l);const w=4+(s.payment.paid_at?1:0);a.setDrawColor(220,220,220),a.rect(r,t-4,l,w*7,"S");const _=s.payment.status==="success"?"âœ“ LUNAS":s.payment.status==="pending"?"â³ Menunggu Pembayaran":n(s.payment.status);if(t=h(a,"Order ID",s.payment.order_id,t,r,l,!0),t=h(a,"Status",_,t,r,l),s.payment.payment_type&&(t=h(a,"Metode",s.payment.payment_type.toUpperCase(),t,r,l,!0)),t=h(a,"Total Bayar",c(s.payment.amount),t,r,l),s.payment.paid_at){const J=new Date(s.payment.paid_at).toLocaleString("id-ID");t=h(a,"Dibayar pada",J,t,r,l,!0)}t+=10}if(s.notes){t=D(a,"CATATAN",t,r,l),a.setDrawColor(220,220,220),a.setFontSize(10),a.setFont("helvetica","normal");const w=a.splitTextToSize(s.notes,l-8),_=w.length*5+6;a.rect(r,t-4,l,_,"S"),a.text(w,r+4,t),t+=_+6}const k=a.internal.pageSize.getHeight()-20;a.setDrawColor(...g.primary),a.setLineWidth(.5),a.line(r,k-5,i-r,k-5),a.setFontSize(8),a.setTextColor(...g.gray),a.setFont("helvetica","italic"),a.text(`Dokumen ini dicetak secara otomatis pada ${new Date().toLocaleString("id-ID")}`,i/2,k,{align:"center"}),a.setFont("helvetica","normal"),a.text("Terima kasih telah menggunakan layanan kami",i/2,k+5,{align:"center"}),a.save(`bukti-booking-${s.id}.pdf`)};function Re({booking:s}){const c=s.payment?.expiry_time?new Date(s.payment.expiry_time):null,n=ye(c);console.log(c),console.log(n);const d=()=>{const m=s.counselor.user.name,j=W(new Date(s.schedule.date),"EEEE, d MMMM yyyy",{locale:z}),C=`${s.schedule.start_time.slice(0,5)} - ${s.schedule.end_time.slice(0,5)}`,x=s.consultation_type==="online"?"Online":"Tatap Muka",f=`#${s.id}`;switch(s.status){case"paid":return`Halo Kak ${m}, ðŸ‘‹

Saya ingin konfirmasi jadwal konseling saya:

ðŸ“‹ *Detail Booking*
â€¢ Kode Booking: ${f}
â€¢ Tanggal: ${j}
â€¢ Waktu: ${C} WIB
â€¢ Tipe: ${x}

Mohon informasi lebih lanjut untuk persiapan sesi konseling. Terima kasih! ðŸ™`;case"rescheduled":return`Halo Kak ${m}, ðŸ‘‹

Saya ingin mengkonfirmasi jadwal konseling saya yang telah di-reschedule:

ðŸ“‹ *Detail Booking*
â€¢ Kode Booking: ${f}
â€¢ Jadwal Baru: ${j}
â€¢ Waktu: ${C} WIB
â€¢ Tipe: ${x}

Mohon konfirmasi apakah jadwal baru ini sudah sesuai. Terima kasih! ðŸ™`;default:return s.refund_status==="requested"||s.refund_status==="processed"?`Halo Admin, ðŸ‘‹

Saya ingin menanyakan status refund untuk booking saya:

ðŸ“‹ *Detail Booking*
â€¢ Kode Booking: ${f}
â€¢ Konselor: ${m}
â€¢ Tanggal Booking: ${j}
â€¢ Status Refund: ${s.refund_status==="requested"?"Diminta":"Diproses"}

Mohon informasi terkait proses refund saya. Terima kasih! ðŸ™`:""}},a=()=>{const m=d(),x=`https://wa.me/${"6281913811966".replace(/\D/g,"").replace(/^0/,"62")}?text=${encodeURIComponent(m)}`;window.open(x,"_blank")},i=["paid","rescheduled"].includes(s.status)||["requested","processed"].includes(s.refund_status),r=()=>{if(s.is_expired)return e.jsx(je,{booking:s});if(s.status==="cancelled")return e.jsx(pe,{booking:s});switch(s.status){case"pending_payment":return e.jsx(xe,{booking:s});case"paid":return e.jsx(he,{booking:s});case"completed":return e.jsx(fe,{booking:s});case"rescheduled":return e.jsx(ge,{booking:s});default:return null}},l=()=>{confirm("Anda yakin ingin membatalkan booking ini?")&&V.post(route("client.cancel.booking",s.id),{reason:"Dibatalkan oleh client"},{preserveScroll:!0})},t=async()=>{await ve(s,te,I)};return e.jsx(Z,{children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4",children:[e.jsx(p,{variant:"ghost",asChild:!0,className:"mb-4",children:e.jsxs(T,{href:route("client.booking.history"),children:[e.jsx(re,{className:"mr-1 h-4 w-4"}),"Kembali ke Daftar Booking"]})}),e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"font-display text-xl font-semibold text-foreground sm:text-2xl",children:"Detail Booking"})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsx(P,{variant:ae(s.status),className:"text-xs sm:text-sm",children:I(s.status)}),n&&!s.is_expired&&s.status=="pending_payment"&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-2 py-1 text-xs font-medium text-red-600",children:n==="Kadaluarsa"?"Kadaluarsa":`Sisa: ${n}`}),["paid","rescheduled"].includes(s.status)&&!s.is_expired&&e.jsxs(p,{variant:"destructive",size:"sm",onClick:()=>l(),className:"text-xs sm:text-sm",children:[e.jsx("span",{className:"sm:hidden",children:"Batal"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancel Booking"})]}),["paid","completed"].includes(s.status)&&e.jsx(p,{variant:"outline",size:"icon",onClick:()=>t(),title:"Print Bukti Booking",children:e.jsx(oe,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx("div",{children:e.jsx(Ne,{booking:s})}),e.jsxs("div",{className:"h-fit",children:[r(),s.notes&&e.jsxs(u,{className:"my-3",children:[e.jsx(L,{children:e.jsx(R,{className:"text-lg",children:"Catatan Klien"})}),e.jsx(o,{children:e.jsx("p",{className:"text-muted-foreground",children:s.notes})})]}),i&&e.jsxs(p,{variant:"default",className:"my-2 w-full gap-2 bg-green-600 hover:bg-green-700",onClick:a,children:[e.jsx(me,{className:"h-4 w-4"}),s.refund_status!=="none"?"Hubungi Admin via WhatsApp":"Hubungi Konselor via WhatsApp"]}),e.jsx(p,{variant:"outline",className:"my-2 w-full border-primary bg-amber-50 transition hover:border-white hover:bg-primary hover:text-white",asChild:!0,children:e.jsx(T,{href:route("client.booking.history"),children:"Lihat Semua Booking"})})]})]})})]})})}export{Re as default};
