const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-BjFOK1TX.js","assets/app-DnkRe3gg.js","assets/index-CCLk4ADv.js","assets/index-CbFwf3xm.css"])))=>i.map(i=>d[i]);
import{j as e,L as B,r as P,a as re,_ as le}from"./app-DnkRe3gg.js";import{c as E,e as U,C as S,f as W,u as ne,A as ie,a as ce,b as de,P as me}from"./PageLayout-BhP6-Gu2.js";import{B as q}from"./badge-DtOB_7Fy.js";import{B as p}from"./button-B09vQD1V.js";import{C as r,c as l,a as O,b as J}from"./card-BjX-wE_5.js";import{C as F}from"./clock-Dn-H54hR.js";import{C as oe}from"./circle-alert-Cbxv46TG.js";import{S as K}from"./separator-BEwYKodd.js";import{f as ue}from"./format-DKbtvHO8.js";import{C as xe}from"./credit-card-BNPJTGCM.js";import{i as he}from"./id-BLZN8RMz.js";import{C as pe}from"./chevron-left-CN79aXmy.js";import"./index-CCLk4ADv.js";const je=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],fe=E("copy",je);const Ne=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ge=E("external-link",Ne);const ye=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],ve=E("printer",ye);function we({booking:s}){const{toast:d}=ne(),[m,x]=P.useState(!1),w=()=>{navigator.clipboard.writeText(s.payment?.payment_url??""),x(!0),d({title:"Link disalin",description:"Link pembayaran berhasil disalin ke clipboard"}),setTimeout(()=>x(!1),2e3)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"border-warning/30 bg-warning/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex w-full items-start gap-3",children:[e.jsx(oe,{className:"mt-0.5 h-5 w-5 text-warning"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[" ",e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Menunggu Pembayaran"}),e.jsx("p",{className:"mb-3 break-words text-sm text-muted-foreground",children:"Silakan selesaikan pembayaran untuk mengonfirmasi booking Anda. Booking akan otomatis dibatalkan jika pembayaran tidak diselesaikan dalam 15 menit."}),e.jsxs("div",{className:"mb-3 flex w-full items-center gap-2",children:[e.jsx("div",{className:"max-w-full flex-1 overflow-hidden truncate rounded-lg bg-background p-3 font-mono text-sm text-muted-foreground",children:s.payment?.payment_url}),e.jsx(p,{variant:"outline",size:"icon",onClick:w,children:m?e.jsx(W,{className:"h-4 w-4 text-success"}):e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(p,{variant:"outline",size:"icon",asChild:!0,children:e.jsx("a",{href:s.payment?.payment_url??"",target:"_blank",rel:"noopener noreferrer",children:e.jsx(ge,{className:"h-4 w-4"})})})]})]})]})})}),e.jsx("div",{className:"space-y-2",children:e.jsx(p,{className:"w-full",size:"lg",variant:"default",asChild:!0,children:e.jsx("a",{href:s.payment?.payment_url??"",target:"_blank",rel:"noopener noreferrer",children:"Bayar Sekarang"})})})]})}function be({booking:s}){const d=new Date(s.schedule.date),m=new Date,x=d<m,j=(new Date(`${s.schedule.date}T${s.schedule.start_time}`).getTime()-m.getTime())/(1e3*60*60),T=j<2&&j>0,b=s.status==="paid"&&!s.is_expired&&s.reschedule_status==="none"&&j>=2,y=_=>_.charAt(0).toUpperCase()+_.slice(1);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"border-success/30 bg-success/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(W,{className:"mt-0.5 h-5 w-5 text-success"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Pembayaran Berhasil"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Booking Anda telah dikonfirmasi. Silahkan datang sesuai jadwal yang telah dipesan."})]})]})})}),s.reschedule_status!=="none"&&e.jsx(r,{className:"border-primary/20 bg-primary/5",children:e.jsxs(l,{className:"space-y-3 p-4",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Status Reschedule"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${s.reschedule_status==="pending"?"bg-yellow-100 text-yellow-800":s.reschedule_status==="approved"?"bg-green-100 text-green-800":s.reschedule_status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-700"}`,children:y(s.reschedule_status??"")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Diminta oleh"}),e.jsx("span",{className:"font-medium",children:s.reschedule_by?y(s.reschedule_by):"-"})]}),s.reschedule_reason&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Alasan Reschedule"}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:s.reschedule_reason})]}),s.reschedule_status==="pending"&&e.jsx("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-3 text-xs text-yellow-700",children:"Permintaan reschedule sedang menunggu persetujuan konselor."}),s.reschedule_status==="approved"&&e.jsx("div",{className:"rounded-md border border-green-200 bg-green-50 p-3 text-xs text-green-700",children:"Reschedule disetujui. Silakan cek jadwal terbaru Anda."}),s.reschedule_status==="rejected"&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-xs text-red-700",children:"Reschedule ditolak. Jadwal tetap menggunakan sesi sebelumnya."})]})}),T&&s.reschedule_status==="none"&&e.jsx(r,{className:"border-orange-300 bg-orange-50",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"mt-0.5 h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Reschedule Tidak Tersedia"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reschedule hanya dapat dilakukan minimal 2 jam sebelum sesi dimulai. Silakan hubungi konselor jika ada kendala."})]})]})})}),b&&e.jsx(r,{className:"border-primary/20 bg-primary/5",children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:e.jsx(S,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Perlu Mengubah Jadwal?"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Anda dapat melakukan reschedule sesi konseling ini jika ada perubahan jadwal. Reschedule hanya dapat dilakukan minimal 2 jam sebelum sesi."}),e.jsx(p,{asChild:!0,children:e.jsxs(B,{href:route("client.pick.reschedule",s.id),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Reschedule Booking"]})})]})]})})}),s.consultation_type==="online"&&e.jsx(e.Fragment,{children:s.meeting_link?e.jsx(r,{className:"border-primary/30 bg-primary/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(S,{className:"mt-0.5 h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Link Konsultasi Tersedia"}),e.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:"Link meeting sudah siap. Anda dapat masuk ke ruang konsultasi sekarang."}),e.jsx(p,{className:"w-full",asChild:!0,children:e.jsx("a",{href:s.meeting_link,target:"_blank",rel:"noopener noreferrer",children:"Masuk ke Sesi Konsultasi"})})]})]})})}):!x&&e.jsx(r,{className:"border-muted",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"mt-0.5 h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Menunggu Link Meeting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Konselor akan mengirimkan link sebelum sesi dimulai."})]})]})})})})]})}function _e({booking:s}){const d=s.cancelled_by==="client"?"Dibatalkan oleh Anda":s.cancelled_by==="counselor"?"Dibatalkan oleh Konselor":s.cancelled_by==="admin"?"Dibatalkan oleh Admin":"Dibatalkan oleh Sistem";return e.jsx("div",{className:"space-y-4",children:e.jsx(r,{className:"border-destructive/30 bg-destructive/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(U,{className:"mt-0.5 h-5 w-5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Booking Dibatalkan"}),e.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:d}),s.cancel_reason&&e.jsxs("p",{className:"rounded-lg bg-background p-2 text-sm italic text-muted-foreground",children:["Alasan: ",s.cancel_reason]}),s.payment?.status==="refund"&&e.jsx("p",{className:"mt-3 text-sm text-blue-600",children:"Dana sedang dalam proses pengembalian (refund)."}),s.payment?.status==="refunded"&&e.jsx("p",{className:"mt-3 text-sm font-medium text-green-600",children:"Dana telah berhasil dikembalikan."})]})]})})})})}function Ce({booking:s}){return e.jsx("div",{className:"space-y-4",children:e.jsx(r,{className:"border-orange-300 bg-orange-50",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"mt-0.5 h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Pembayaran Kadaluarsa"}),e.jsx("p",{className:"mb-2 text-sm text-muted-foreground",children:"Waktu pembayaran telah berakhir. Booking dibatalkan otomatis oleh sistem."}),s.cancel_reason&&e.jsxs("p",{className:"rounded-lg bg-background p-2 text-sm italic text-muted-foreground",children:["Alasan: ",s.cancel_reason]})]})]})})})})}function Se({booking:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"border-primary/30 bg-primary/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(W,{className:"mt-0.5 h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Sesi Konsultasi Selesai"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Terima kasih telah menggunakan layanan kami. Kami harap sesi konsultasi bermanfaat untuk Anda."})]})]})})}),s.counselor_notes&&e.jsxs(r,{className:"border-border bg-background",children:[e.jsx(O,{children:e.jsx(J,{className:"text-lg",children:"Catatan Konselor"})}),e.jsx(l,{children:e.jsx("p",{className:"whitespace-pre-line text-sm leading-relaxed text-muted-foreground",children:s.counselor_notes})})]})]})}function Te({booking:s}){const d=s.previous_schedule,m=s.previous_second_schedule,x=new Date,j=(new Date(`${s.schedule.date}T${s.schedule.start_time}`).getTime()-x.getTime())/(1e3*60*60),T=j<2&&j>0,b=j>=2;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"border-warning/30 bg-warning/5",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(S,{className:"mt-0.5 h-5 w-5 text-warning"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Jadwal Diubah"}),e.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:"Booking ini telah dijadwalkan ulang. (Perubahan jadwal masih menunggu persetujuan Konselor)"}),d&&e.jsxs("div",{className:"space-y-1 rounded-lg border bg-background p-3 text-sm",children:[e.jsx("p",{className:"mb-1 text-muted-foreground",children:"Jadwal Sebelumnya:"}),e.jsx("p",{className:"font-medium text-foreground",children:d.date}),e.jsxs("p",{className:"text-muted-foreground",children:[d.start_time.substring(0,5)," -"," ",d.end_time.substring(0,5)]}),m&&e.jsxs("p",{className:"text-muted-foreground",children:["&"," ",m.start_time.substring(0,5)," ","-"," ",m.end_time.substring(0,5)]})]})]})]})})}),T&&e.jsx(r,{className:"border-orange-300 bg-orange-50",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(F,{className:"mt-0.5 h-5 w-5 text-orange-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"mb-1 font-medium text-foreground",children:"Reschedule & Pembatalan Tidak Tersedia"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reschedule dan pembatalan hanya dapat dilakukan minimal 2 jam sebelum sesi dimulai. Silakan hubungi konselor jika ada kendala."})]})]})})}),b&&s.reschedule_status==="approved"&&e.jsx(r,{className:"border-primary/20 bg-primary/5",children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:e.jsx(S,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Perlu Mengubah Jadwal Lagi?"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Anda dapat melakukan reschedule ulang jika diperlukan. Reschedule hanya dapat dilakukan minimal 2 jam sebelum sesi."}),e.jsx(p,{asChild:!0,children:e.jsxs(B,{href:route("client.pick.reschedule",s.id),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Reschedule Ulang"]})})]})]})})}),b&&s.reschedule_status==="approved"&&e.jsx(r,{className:"border-destructive/20 bg-destructive/5",children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-destructive/10 p-3",children:e.jsx(U,{className:"h-6 w-6 text-destructive"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Perlu Membatalkan Booking?"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Pembatalan hanya dapat dilakukan minimal 2 jam sebelum sesi dimulai. Dana akan dikembalikan sesuai kebijakan refund."}),e.jsx(p,{variant:"destructive",asChild:!0,children:e.jsxs(B,{href:route("client.booking.cancel",s.id),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Batalkan Booking"]})})]})]})})}),s.meeting_link&&e.jsx(p,{className:"w-full",size:"lg",asChild:!0,children:e.jsx("a",{href:s.meeting_link,target:"_blank",rel:"noopener noreferrer",children:"Masuk ke Sesi Konsultasi"})})]})}function De({booking:s}){const m=s.counselor.user.profile_pic?`http://127.0.0.1:8000/storage/${s.counselor.user.profile_pic}`:"/default-avatar.png",x=new Date(s.schedule.date),w=s.schedule.start_time.substring(0,5),j=s.second_schedule?.end_time?.substring(0,5)||s.schedule.end_time.substring(0,5),T=`${w} - ${j}`,b=s.payment?.amount??0,y=g=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(g),_=g=>g.replace(/_/g," ").split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");return e.jsxs(r,{className:"mb-6",children:[e.jsx(O,{className:"pb-4",children:e.jsxs(J,{className:"text-lg",children:["Invoice #",s.payment?.order_id]})}),e.jsxs(l,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsxs(ie,{className:"mx-auto h-16 w-16 rounded-lg sm:mx-0",children:[e.jsx(ce,{src:m,alt:s.counselor.user.name}),e.jsx(de,{className:"rounded-lg",children:s.counselor.user.name.split(" ").map(g=>g[0]).join("")})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:s.counselor.user.name}),e.jsx("div",{className:"mt-1 flex flex-wrap justify-center gap-1 sm:justify-start",children:s.counselor.specialization?.split(",").map((g,c)=>e.jsx(q,{variant:"secondary",className:"text-xs",children:g.trim()},c))})]})]}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(A,{icon:e.jsx(S,{className:"h-4 w-4"}),label:"Tanggal",value:ue(x,"EEEE, d MMMM yyyy",{locale:he})}),e.jsx(A,{icon:e.jsx(F,{className:"h-4 w-4"}),label:"Waktu",value:T}),e.jsx(A,{icon:e.jsx(F,{className:"h-4 w-4"}),label:"Durasi",value:`${s.duration_hours} jam`}),e.jsx(A,{icon:e.jsx(xe,{className:"h-4 w-4"}),label:"Metode Pembayaran",value:_(s.payment?.payment_type??"Belum")}),e.jsx(A,{icon:e.jsx(S,{className:"h-4 w-4"}),label:"Jenis Konsultasi",value:s.consultation_type})]}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Biaya Sesi"}),e.jsx("span",{children:y(s.price)})]}),e.jsx(K,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Total"}),e.jsx("span",{className:"text-xl font-semibold",children:y(b)})]})]})]})]})}function A({icon:s,label:d,value:m}){return e.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s,e.jsx("span",{children:d})]}),e.jsx("span",{className:"break-words font-medium text-foreground",children:m})]})}function Ee({booking:s}){s.counselor.user.profile_pic&&`http://127.0.0.1:8000${s.counselor.user.profile_pic}`;const m=c=>({pending_payment:"warning",paid:"success",completed:"default",cancelled:"destructive",rescheduled:"secondary"})[c]||"secondary",x=c=>c.replace(/_/g," ").split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),w=c=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(c),j=()=>{if(s.is_expired)return e.jsx(Ce,{booking:s});if(s.status==="cancelled")return e.jsx(_e,{booking:s});switch(s.status){case"pending_payment":return e.jsx(we,{booking:s});case"paid":return e.jsx(be,{booking:s});case"completed":return e.jsx(Se,{booking:s});case"rescheduled":return e.jsx(Te,{booking:s});default:return null}},T=()=>{confirm("Anda yakin ingin membatalkan booking ini?")&&re.post(route("client.cancel.booking",s.id),{reason:"Dibatalkan oleh client"},{preserveScroll:!0})},b=async()=>{const{jsPDF:c}=await le(async()=>{const{jsPDF:h}=await import("./jspdf.es.min-BjFOK1TX.js").then(i=>i.j);return{jsPDF:h}},__vite__mapDeps([0,1,2,3])),a=new c,o=a.internal.pageSize.getWidth(),n=15,v=o-n*2;let t=15;const L=[128,0,32],X=[34,197,94],I=[107,114,128],H=[243,244,246],M=(h,i)=>(a.setFillColor(...L),a.rect(n,i,v,8,"F"),a.setFontSize(11),a.setFont("helvetica","bold"),a.setTextColor(255,255,255),a.text(h,n+4,i+5.5),a.setTextColor(0,0,0),i+12),u=(h,i,N,z=!1)=>(z&&(a.setFillColor(...H),a.rect(n,N-4,v,7,"F")),a.setFontSize(10),a.setFont("helvetica","bold"),a.setTextColor(...I),a.text(h,n+4,N),a.setFont("helvetica","normal"),a.setTextColor(0,0,0),a.text(i,n+55,N),N+7);a.setFillColor(...L),a.rect(0,0,o,35,"F"),a.setFontSize(18),a.setFont("helvetica","bold"),a.setTextColor(255,255,255),a.text("BUKTI BOOKING KONSULTASI",o/2,15,{align:"center"}),a.setFontSize(10),a.setFont("helvetica","normal"),a.text(`No. Booking: #${s.id}`,o/2,24,{align:"center"});const V=x(s.status),Y=a.getTextWidth(V)+12,G=(o-Y)/2;s.status==="paid"||s.status==="completed"?a.setFillColor(...X):s.status==="cancelled"?a.setFillColor(239,68,68):a.setFillColor(251,191,36),a.roundedRect(G,27,Y,6,2,2,"F"),a.setFontSize(8),a.setTextColor(255,255,255),a.text(V.toUpperCase(),o/2,31,{align:"center"}),a.setTextColor(0,0,0),t=45;const D=v/2-3;let C=M("DATA KLIEN",t);a.setDrawColor(220,220,220),a.rect(n,C-4,D,28,"S"),C=u("Nama",s.client.name,C,!0),C=u("Email",s.client.email,C),C=u("Telepon",s.client.phone||"-",C,!0);const k=n+D+6;let f=t;a.setFillColor(...L),a.rect(k,f,D,8,"F"),a.setFontSize(11),a.setFont("helvetica","bold"),a.setTextColor(255,255,255),a.text("DATA COUNSELOR",k+4,f+5.5),a.setTextColor(0,0,0),f+=12,a.setDrawColor(220,220,220),a.rect(k,f-4,D,28,"S");const $=(h,i,N,z=!1)=>{z&&(a.setFillColor(...H),a.rect(k,N-4,D,7,"F")),a.setFontSize(10),a.setFont("helvetica","bold"),a.setTextColor(...I),a.text(h,k+4,N),a.setFont("helvetica","normal"),a.setTextColor(0,0,0);const ae=D-55,te=a.getTextWidth(i)>ae?i.substring(0,20)+"...":i;return a.text(te,k+45,N),N+7};f=$("Nama",s.counselor.user.name,f,!0),f=$("Spesialisasi",s.counselor.specialization,f),f=$("Pendidikan",s.counselor.education,f,!0),t=Math.max(C,f)+10,t=M("DETAIL JADWAL KONSULTASI",t),a.setDrawColor(220,220,220),a.rect(n,t-4,v,35,"S");const Q=new Date(s.schedule.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Z=s.schedule.start_time.substring(0,5),ee=s.schedule.end_time.substring(0,5),se=s.consultation_type==="online"?"Online":"Offline";if(t=u("Tanggal",Q,t,!0),t=u("Waktu",`${Z} - ${ee} WIB`,t),t=u("Durasi",`${s.duration_hours} Jam`,t,!0),t=u("Tipe",se,t),t=u("Biaya",w(s.price),t,!0),t+=10,s.payment){t=M("INFORMASI PEMBAYARAN",t);const h=4+(s.payment.paid_at?1:0);a.setDrawColor(220,220,220),a.rect(n,t-4,v,h*7,"S");const i=s.payment.status==="paid"?"✓ LUNAS":s.payment.status==="pending"?"⏳ Menunggu Pembayaran":x(s.payment.status);if(t=u("Order ID",s.payment.order_id,t,!0),t=u("Status",i,t),s.payment.payment_type&&(t=u("Metode",s.payment.payment_type.toUpperCase(),t,!0)),t=u("Total Bayar",w(s.payment.amount),t),s.payment.paid_at){const N=new Date(s.payment.paid_at).toLocaleString("id-ID");t=u("Dibayar pada",N,t,!0)}t+=10}if(s.notes){t=M("CATATAN",t),a.setDrawColor(220,220,220),a.setFontSize(10),a.setFont("helvetica","normal");const h=a.splitTextToSize(s.notes,v-8),i=h.length*5+6;a.rect(n,t-4,v,i,"S"),a.text(h,n+4,t),t+=i+6}const R=a.internal.pageSize.getHeight()-20;a.setDrawColor(...L),a.setLineWidth(.5),a.line(n,R-5,o-n,R-5),a.setFontSize(8),a.setTextColor(...I),a.setFont("helvetica","italic"),a.text(`Dokumen ini dicetak secara otomatis pada ${new Date().toLocaleString("id-ID")}`,o/2,R,{align:"center"}),a.setFont("helvetica","normal"),a.text("Terima kasih telah menggunakan layanan kami",o/2,R+5,{align:"center"}),a.save(`bukti-booking-${s.id}.pdf`)},y=s.payment?.expiry_time?new Date(s.payment.expiry_time):null,[_,g]=P.useState(null);return P.useEffect(()=>{if(!y)return;const c=setInterval(()=>{const a=new Date().getTime(),o=y.getTime()-a;if(o<=0){g("Kadaluarsa"),clearInterval(c);return}const n=Math.floor(o/(1e3*60*60)),v=Math.floor(o%(1e3*60*60)/(1e3*60)),t=Math.floor(o%(1e3*60)/1e3);g(`${n}j ${v}m ${t}d`)},1e3);return()=>clearInterval(c)},[y]),e.jsx(me,{children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4",children:[e.jsx(p,{variant:"ghost",asChild:!0,className:"mb-4",children:e.jsxs(B,{href:route("client.booking.history"),children:[e.jsx(pe,{className:"mr-1 h-4 w-4"}),"Kembali ke Daftar Booking"]})}),e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"font-display text-2xl font-semibold text-foreground",children:"Detail Booking"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{variant:m(s.status),className:"text-sm",children:x(s.status)}),_&&!s.is_expired&&s.status=="pending_payment"&&e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-1 text-xs font-medium text-red-600",children:_==="Kadaluarsa"?"Kadaluarsa":`Sisa waktu: ${_}`}),["paid","rescheduled"].includes(s.status)&&!s.is_expired&&e.jsx(p,{variant:"destructive",size:"sm",onClick:()=>T(),children:"Cancel Booking"}),["paid","completed"].includes(s.status)&&e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>b(),className:"gap-1",children:[e.jsx(ve,{className:"h-4 w-4"}),"Print Bukti Booking"]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx("div",{children:e.jsx(De,{booking:s})}),e.jsxs("div",{className:"h-fit",children:[j(),s.notes&&e.jsxs(r,{className:"my-3",children:[e.jsx(O,{children:e.jsx(J,{className:"text-lg",children:"Catatan Klien"})}),e.jsx(l,{children:e.jsx("p",{className:"text-muted-foreground",children:s.notes})})]}),e.jsx(p,{variant:"outline",className:"my-2 w-full border-primary bg-amber-50 transition hover:border-white hover:bg-primary hover:text-white",asChild:!0,children:e.jsx(B,{href:route("client.booking.history"),children:"Lihat Semua Booking"})})]})]})})]})})}export{Ee as default};
