import{r as o,j as e,L as D,a as E}from"./app-Cphvz44M.js";import{P as M,A as $,a as T,b as A,C as F}from"./PageLayout-DDXYa8m8.js";import{C as d,a as m,b as c,c as x}from"./card-DH1y5Idi.js";import{B as j}from"./button-LSwK0d_m.js";import{B as I}from"./badge-CRh8j_wW.js";import{S as f}from"./separator-D3ifPLUO.js";import{C as L}from"./chevron-left-B8LhDHpc.js";import{C as b}from"./clock-BLq7A0NJ.js";import{f as P}from"./format-DKbtvHO8.js";import{i as R}from"./id-BLZN8RMz.js";import"./index-DS3aEpLL.js";function V({counselor:a,schedules:s}){const[u,N]=o.useState(""),[t,p]=o.useState("offline"),[h,n]=o.useState(!1),y=s.length*60,g=a.price_per_session*s.length,v=g,k=a.specialization.split(",").map(r=>r.trim()),C=s[0],w=P(new Date(C.date),"EEEE, d MMMM yyyy",{locale:R}),_=s.length>0?`${s[0].start_time.slice(0,5)} - ${s[s.length-1].end_time.slice(0,5)}`:"",i=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),B=()=>{n(!0);const r={schedule_id:s[0].id,second_schedule_id:s.length>1?s[1].id:null,consultation_type:t,notes:u||null};E.post(route("client.book.schedule",a.id),r,{onFinish:()=>n(!1),onError:l=>{console.error("Booking errors:",l),n(!1)}})},S=a.user.profile_pic?`/storage/${a.user.profile_pic}`:void 0;return e.jsx(M,{children:e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsx(j,{variant:"ghost",asChild:!0,className:"mb-4",children:e.jsxs(D,{href:route("client.pick.schedule",a.id),children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),"Kembali ke Jadwal"]})}),e.jsx("h1",{className:"font-display text-2xl font-semibold text-foreground mb-6",children:"Konfirmasi Booking"}),e.jsxs(d,{className:"mb-6",children:[e.jsx(m,{className:"pb-4",children:e.jsx(c,{className:"text-lg",children:"Ringkasan Booking"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs($,{className:"h-14 w-14 rounded-lg",children:[e.jsx(T,{src:S,alt:a.user.name}),e.jsx(A,{className:"rounded-lg",children:a.user.name.split(" ").map(r=>r[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:a.user.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.education}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:k.slice(0,2).map((r,l)=>e.jsx(I,{variant:"secondary",className:"text-xs",children:r},l))})]})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:"Tanggal"})]}),e.jsx("span",{className:"font-medium text-foreground",children:w})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:"Waktu"})]}),e.jsx("span",{className:"font-medium text-foreground",children:_})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:"Durasi"})]}),e.jsxs("span",{className:"font-medium text-foreground",children:[y," menit (",s.length," sesi)"]})]})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Biaya Sesi (",s.length,"x ",i(a.price_per_session),")"]}),e.jsx("span",{className:"text-foreground",children:i(g)})]}),e.jsx(f,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Total"}),e.jsx("span",{className:"text-xl font-semibold text-foreground",children:i(v)})]})]})]})]}),e.jsxs(d,{className:"mb-6",children:[e.jsx(m,{className:"pb-4",children:e.jsx(c,{className:"text-lg",children:"Jenis Konsultasi"})}),e.jsx(x,{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:()=>p("offline"),className:`
                  flex items-center gap-3 p-4 rounded-lg border text-left transition-all
                  ${t==="offline"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}
                `,children:[e.jsx("div",{className:`
                    h-4 w-4 rounded-full border
                    ${t==="offline"?"bg-primary border-primary":"border-muted-foreground"}
                  `}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Offline"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tatap muka langsung di lokasi konselor"})]})]}),e.jsxs("button",{onClick:()=>p("online"),className:`
                  flex items-center gap-3 p-4 rounded-lg border text-left transition-all
                  ${t==="online"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}
                `,children:[e.jsx("div",{className:`
                    h-4 w-4 rounded-full border
                    ${t==="online"?"bg-primary border-primary":"border-muted-foreground"}
                  `}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Online"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Melalui video call (Google Meet / Zoom)"})]})]})]})})]}),e.jsxs(d,{className:"mb-6",children:[e.jsx(m,{className:"pb-4",children:e.jsx(c,{className:"text-lg",children:"Keluhan yang dialami (Opsional)"})}),e.jsx(x,{children:e.jsx("textarea",{value:u,onChange:r=>N(r.target.value),placeholder:"Ceritakan keluhan Anda sebelum sesi dimulai ",className:`
                w-full h-28 p-3 rounded-lg border border-border
                bg-background text-foreground text-sm
                focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent
                resize-none
              `})})]}),e.jsx(j,{className:"w-full",size:"lg",onClick:B,disabled:h,children:h?"Memproses...":"Lanjut ke Pembayaran"})]})})}export{V as default};
